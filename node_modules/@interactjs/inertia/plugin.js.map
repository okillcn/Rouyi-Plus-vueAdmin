{
	"version": 3,
	"names": [
		"Modification",
		"modifiers",
		"offset",
		"dom",
		"hypot",
		"is",
		"copyCoords",
		"raf",
		"install",
		"scope",
		"defaults",
		"usePlugin",
		"default",
		"actions",
		"phases",
		"inertiastart",
		"resume",
		"perAction",
		"inertia",
		"enabled",
		"resistance",
		"minSpeed",
		"endSpeed",
		"allowResume",
		"smoothEndDuration",
		"InertiaState",
		"active",
		"isModified",
		"smoothEnd",
		"modification",
		"modifierCount",
		"modifierArg",
		"startCoords",
		"t0",
		"v0",
		"te",
		"targetOffset",
		"modifiedOffset",
		"currentOffset",
		"lambda_v0",
		"one_ve_v0",
		"timeout",
		"interaction",
		"constructor",
		"start",
		"event",
		"options",
		"getOptions",
		"client",
		"velocityClient",
		"coords",
		"velocity",
		"pointerSpeed",
		"x",
		"y",
		"copyFrom",
		"_now",
		"cur",
		"page",
		"fillArg",
		"pageCoords",
		"preEnd",
		"phase",
		"thrown",
		"timeStamp",
		"startInertia",
		"result",
		"setAll",
		"changed",
		"startSmoothEnd",
		"rect",
		"offsetBy",
		"_doPhase",
		"simulation",
		"startVelocity",
		"lambda",
		"inertiaDur",
		"Math",
		"log",
		"delta",
		"onNextFrame",
		"inertiaTick",
		"smoothEndTick",
		"tickFn",
		"request",
		"t",
		"progress",
		"exp",
		"newOffset",
		"getQuadraticCurvePoint",
		"move",
		"end",
		"duration",
		"easeOutQuad",
		"skipModifiers",
		"pointer",
		"eventTarget",
		"updatePointer",
		"prev",
		"stop",
		"cancel",
		"_interacting",
		"started",
		"arg",
		"state",
		"element",
		"parentNode",
		"interactable",
		"prepared",
		"name",
		"id",
		"before",
		"listeners",
		"applyToInteraction",
		"setAndApply",
		"addEventModifiers",
		"restoreInteractionCoords",
		"_getQBezierValue",
		"p1",
		"p2",
		"p3",
		"iT",
		"startX",
		"startY",
		"cpX",
		"cpY",
		"endX",
		"endY",
		"position",
		"b",
		"c",
		"d"
	],
	"sources": [
		"plugin.ts"
	],
	"sourcesContent": [
		"import type { Interaction, DoPhaseArg } from '@interactjs/core/Interaction'\nimport type { Scope, SignalArgs, Plugin } from '@interactjs/core/scope'\nimport type { ActionName, Point, PointerEventType } from '@interactjs/core/types'\nimport Modification from '@interactjs/modifiers/Modification'\nimport * as modifiers from '@interactjs/modifiers/base'\nimport type { ModifierArg } from '@interactjs/modifiers/types'\nimport offset from '@interactjs/offset/plugin'\nimport * as dom from '@interactjs/utils/domUtils'\nimport hypot from '@interactjs/utils/hypot'\nimport is from '@interactjs/utils/is'\nimport { copyCoords } from '@interactjs/utils/pointerUtils'\nimport raf from '@interactjs/utils/raf'\n\ndeclare module '@interactjs/core/InteractEvent' {\n  interface PhaseMap {\n    resume?: true\n    inertiastart?: true\n  }\n}\n\ndeclare module '@interactjs/core/Interaction' {\n  interface Interaction {\n    inertia?: InertiaState\n  }\n}\n\ndeclare module '@interactjs/core/options' {\n  interface PerActionDefaults {\n    inertia?: {\n      enabled?: boolean\n      resistance?: number // the lambda in exponential decay\n      minSpeed?: number // target speed must be above this for inertia to start\n      endSpeed?: number // the speed at which inertia is slow enough to stop\n      allowResume?: true // allow resuming an action in inertia phase\n      smoothEndDuration?: number // animate to snap/restrict endOnly if there's no inertia\n    }\n  }\n}\n\ndeclare module '@interactjs/core/scope' {\n  interface SignalArgs {\n    'interactions:before-action-inertiastart': Omit<DoPhaseArg<ActionName, 'inertiastart'>, 'iEvent'>\n    'interactions:action-inertiastart': DoPhaseArg<ActionName, 'inertiastart'>\n    'interactions:after-action-inertiastart': DoPhaseArg<ActionName, 'inertiastart'>\n    'interactions:before-action-resume': Omit<DoPhaseArg<ActionName, 'resume'>, 'iEvent'>\n    'interactions:action-resume': DoPhaseArg<ActionName, 'resume'>\n    'interactions:after-action-resume': DoPhaseArg<ActionName, 'resume'>\n  }\n}\n\nfunction install (scope: Scope) {\n  const { defaults } = scope\n\n  scope.usePlugin(offset)\n  scope.usePlugin(modifiers.default)\n  scope.actions.phases.inertiastart = true\n  scope.actions.phases.resume = true\n\n  defaults.perAction.inertia = {\n    enabled: false,\n    resistance: 10, // the lambda in exponential decay\n    minSpeed: 100, // target speed must be above this for inertia to start\n    endSpeed: 10, // the speed at which inertia is slow enough to stop\n    allowResume: true, // allow resuming an action in inertia phase\n    smoothEndDuration: 300, // animate to snap/restrict endOnly if there's no inertia\n  }\n}\n\nexport class InertiaState {\n  active = false\n  isModified = false\n  smoothEnd = false\n  allowResume = false\n\n  modification!: Modification\n  modifierCount = 0\n  modifierArg!: ModifierArg\n\n  startCoords!: Point\n  t0 = 0\n  v0 = 0\n\n  te = 0\n  targetOffset!: Point\n  modifiedOffset!: Point\n  currentOffset!: Point\n\n  lambda_v0? = 0 // eslint-disable-line camelcase\n  one_ve_v0? = 0 // eslint-disable-line camelcase\n  timeout!: number\n  readonly interaction: Interaction\n\n  constructor (interaction: Interaction) {\n    this.interaction = interaction\n  }\n\n  start (event: PointerEventType) {\n    const { interaction } = this\n    const options = getOptions(interaction)\n\n    if (!options || !options.enabled) {\n      return false\n    }\n\n    const { client: velocityClient } = interaction.coords.velocity\n    const pointerSpeed = hypot(velocityClient.x, velocityClient.y)\n    const modification = this.modification || (this.modification = new Modification(interaction))\n\n    modification.copyFrom(interaction.modification)\n\n    this.t0 = interaction._now()\n    this.allowResume = options.allowResume\n    this.v0 = pointerSpeed\n    this.currentOffset = { x: 0, y: 0 }\n    this.startCoords = interaction.coords.cur.page\n\n    this.modifierArg = modification.fillArg({\n      pageCoords: this.startCoords,\n      preEnd: true,\n      phase: 'inertiastart',\n    })\n\n    const thrown =\n      this.t0 - interaction.coords.cur.timeStamp < 50 &&\n      pointerSpeed > options.minSpeed &&\n      pointerSpeed > options.endSpeed\n\n    if (thrown) {\n      this.startInertia()\n    } else {\n      modification.result = modification.setAll(this.modifierArg)\n\n      if (!modification.result.changed) {\n        return false\n      }\n\n      this.startSmoothEnd()\n    }\n\n    // force modification change\n    interaction.modification.result.rect = null\n\n    // bring inertiastart event to the target coords\n    interaction.offsetBy(this.targetOffset)\n    interaction._doPhase({\n      interaction,\n      event,\n      phase: 'inertiastart',\n    })\n    interaction.offsetBy({ x: -this.targetOffset.x, y: -this.targetOffset.y })\n    // force modification change\n    interaction.modification.result.rect = null\n\n    this.active = true\n    interaction.simulation = this\n\n    return true\n  }\n\n  startInertia () {\n    const startVelocity = this.interaction.coords.velocity.client\n    const options = getOptions(this.interaction)\n    const lambda = options.resistance\n    const inertiaDur = -Math.log(options.endSpeed / this.v0) / lambda\n\n    this.targetOffset = {\n      x: (startVelocity.x - inertiaDur) / lambda,\n      y: (startVelocity.y - inertiaDur) / lambda,\n    }\n\n    this.te = inertiaDur\n    this.lambda_v0 = lambda / this.v0\n    this.one_ve_v0 = 1 - options.endSpeed / this.v0\n\n    const { modification, modifierArg } = this\n\n    modifierArg.pageCoords = {\n      x: this.startCoords.x + this.targetOffset.x,\n      y: this.startCoords.y + this.targetOffset.y,\n    }\n\n    modification.result = modification.setAll(modifierArg)\n\n    if (modification.result.changed) {\n      this.isModified = true\n      this.modifiedOffset = {\n        x: this.targetOffset.x + modification.result.delta.x,\n        y: this.targetOffset.y + modification.result.delta.y,\n      }\n    }\n\n    this.onNextFrame(() => this.inertiaTick())\n  }\n\n  startSmoothEnd () {\n    this.smoothEnd = true\n    this.isModified = true\n    this.targetOffset = {\n      x: this.modification.result.delta.x,\n      y: this.modification.result.delta.y,\n    }\n\n    this.onNextFrame(() => this.smoothEndTick())\n  }\n\n  onNextFrame (tickFn: () => void) {\n    this.timeout = raf.request(() => {\n      if (this.active) {\n        tickFn()\n      }\n    })\n  }\n\n  inertiaTick () {\n    const { interaction } = this\n    const options = getOptions(interaction)\n    const lambda = options.resistance\n    const t = (interaction._now() - this.t0) / 1000\n\n    if (t < this.te) {\n      const progress = 1 - (Math.exp(-lambda * t) - this.lambda_v0) / this.one_ve_v0\n      let newOffset: Point\n\n      if (this.isModified) {\n        newOffset = getQuadraticCurvePoint(\n          0,\n          0,\n          this.targetOffset.x,\n          this.targetOffset.y,\n          this.modifiedOffset.x,\n          this.modifiedOffset.y,\n          progress,\n        )\n      } else {\n        newOffset = {\n          x: this.targetOffset.x * progress,\n          y: this.targetOffset.y * progress,\n        }\n      }\n\n      const delta = { x: newOffset.x - this.currentOffset.x, y: newOffset.y - this.currentOffset.y }\n\n      this.currentOffset.x += delta.x\n      this.currentOffset.y += delta.y\n\n      interaction.offsetBy(delta)\n      interaction.move()\n\n      this.onNextFrame(() => this.inertiaTick())\n    } else {\n      interaction.offsetBy({\n        x: this.modifiedOffset.x - this.currentOffset.x,\n        y: this.modifiedOffset.y - this.currentOffset.y,\n      })\n\n      this.end()\n    }\n  }\n\n  smoothEndTick () {\n    const { interaction } = this\n    const t = interaction._now() - this.t0\n    const { smoothEndDuration: duration } = getOptions(interaction)\n\n    if (t < duration) {\n      const newOffset = {\n        x: easeOutQuad(t, 0, this.targetOffset.x, duration),\n        y: easeOutQuad(t, 0, this.targetOffset.y, duration),\n      }\n      const delta = {\n        x: newOffset.x - this.currentOffset.x,\n        y: newOffset.y - this.currentOffset.y,\n      }\n\n      this.currentOffset.x += delta.x\n      this.currentOffset.y += delta.y\n\n      interaction.offsetBy(delta)\n      interaction.move({ skipModifiers: this.modifierCount })\n\n      this.onNextFrame(() => this.smoothEndTick())\n    } else {\n      interaction.offsetBy({\n        x: this.targetOffset.x - this.currentOffset.x,\n        y: this.targetOffset.y - this.currentOffset.y,\n      })\n\n      this.end()\n    }\n  }\n\n  resume ({ pointer, event, eventTarget }: SignalArgs['interactions:down']) {\n    const { interaction } = this\n\n    // undo inertia changes to interaction coords\n    interaction.offsetBy({\n      x: -this.currentOffset.x,\n      y: -this.currentOffset.y,\n    })\n\n    // update pointer at pointer down position\n    interaction.updatePointer(pointer, event, eventTarget, true)\n\n    // fire resume signals and event\n    interaction._doPhase({\n      interaction,\n      event,\n      phase: 'resume',\n    })\n    copyCoords(interaction.coords.prev, interaction.coords.cur)\n\n    this.stop()\n  }\n\n  end () {\n    this.interaction.move()\n    this.interaction.end()\n    this.stop()\n  }\n\n  stop () {\n    this.active = this.smoothEnd = false\n    this.interaction.simulation = null\n    raf.cancel(this.timeout)\n  }\n}\n\nfunction start ({ interaction, event }: DoPhaseArg<ActionName, 'end'>) {\n  if (!interaction._interacting || interaction.simulation) {\n    return null\n  }\n\n  const started = interaction.inertia.start(event)\n\n  // prevent action end if inertia or smoothEnd\n  return started ? false : null\n}\n\n// Check if the down event hits the current inertia target\n// control should be return to the user\nfunction resume (arg: SignalArgs['interactions:down']) {\n  const { interaction, eventTarget } = arg\n  const state = interaction.inertia\n\n  if (!state.active) return\n\n  let element = eventTarget as Node\n\n  // climb up the DOM tree from the event target\n  while (is.element(element)) {\n    // if interaction element is the current inertia target element\n    if (element === interaction.element) {\n      state.resume(arg)\n      break\n    }\n\n    element = dom.parentNode(element)\n  }\n}\n\nfunction stop ({ interaction }: { interaction: Interaction }) {\n  const state = interaction.inertia\n\n  if (state.active) {\n    state.stop()\n  }\n}\n\nfunction getOptions ({ interactable, prepared }: Interaction) {\n  return interactable && interactable.options && prepared.name && interactable.options[prepared.name].inertia\n}\n\nconst inertia: Plugin = {\n  id: 'inertia',\n  before: ['modifiers', 'actions'],\n  install,\n  listeners: {\n    'interactions:new': ({ interaction }) => {\n      interaction.inertia = new InertiaState(interaction)\n    },\n\n    'interactions:before-action-end': start,\n    'interactions:down': resume,\n    'interactions:stop': stop,\n\n    'interactions:before-action-resume': (arg) => {\n      const { modification } = arg.interaction\n\n      modification.stop(arg)\n      modification.start(arg, arg.interaction.coords.cur.page)\n      modification.applyToInteraction(arg)\n    },\n\n    'interactions:before-action-inertiastart': (arg) => arg.interaction.modification.setAndApply(arg),\n    'interactions:action-resume': modifiers.addEventModifiers,\n    'interactions:action-inertiastart': modifiers.addEventModifiers,\n    'interactions:after-action-inertiastart': (arg) =>\n      arg.interaction.modification.restoreInteractionCoords(arg),\n    'interactions:after-action-resume': (arg) => arg.interaction.modification.restoreInteractionCoords(arg),\n  },\n}\n\n// http://stackoverflow.com/a/5634528/2280888\nfunction _getQBezierValue (t: number, p1: number, p2: number, p3: number) {\n  const iT = 1 - t\n  return iT * iT * p1 + 2 * iT * t * p2 + t * t * p3\n}\n\nfunction getQuadraticCurvePoint (\n  startX: number,\n  startY: number,\n  cpX: number,\n  cpY: number,\n  endX: number,\n  endY: number,\n  position: number,\n) {\n  return {\n    x: _getQBezierValue(position, startX, cpX, endX),\n    y: _getQBezierValue(position, startY, cpY, endY),\n  }\n}\n\n// http://gizma.com/easing/\nfunction easeOutQuad (t: number, b: number, c: number, d: number) {\n  t /= d\n  return -c * t * (t - 2) + b\n}\n\nexport default inertia\n"
	],
	"mappings": "AAGA,OAAOA,YAAP,MAAyB,8BAAzB;AACA,OAAO,KAAKC,SAAZ,MAA2B,sBAA3B;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAO,KAAKC,GAAZ,MAAqB,sBAArB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,EAAP,MAAe,gBAAf;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,GAAP,MAAgB,iBAAhB;;AAuCA,SAASC,OAAT,CAAkBC,KAAlB,EAAgC;EAC9B,MAAM;IAAEC;EAAF,IAAeD,KAArB;EAEAA,KAAK,CAACE,SAAN,CAAgBT,MAAhB;EACAO,KAAK,CAACE,SAAN,CAAgBV,SAAS,CAACW,OAA1B;EACAH,KAAK,CAACI,OAAN,CAAcC,MAAd,CAAqBC,YAArB,GAAoC,IAApC;EACAN,KAAK,CAACI,OAAN,CAAcC,MAAd,CAAqBE,MAArB,GAA8B,IAA9B;EAEAN,QAAQ,CAACO,SAAT,CAAmBC,OAAnB,GAA6B;IAC3BC,OAAO,EAAE,KADkB;IAE3BC,UAAU,EAAE,EAFe;IAEX;IAChBC,QAAQ,EAAE,GAHiB;IAGZ;IACfC,QAAQ,EAAE,EAJiB;IAIb;IACdC,WAAW,EAAE,IALc;IAKR;IACnBC,iBAAiB,EAAE,GANQ,CAMH;;EANG,CAA7B;AAQD;;AAED,OAAO,MAAMC,YAAN,CAAmB;EACxBC,MAAM,GAAG,KAAH;EACNC,UAAU,GAAG,KAAH;EACVC,SAAS,GAAG,KAAH;EACTL,WAAW,GAAG,KAAH;EAEXM,YAAY;EACZC,aAAa,GAAG,CAAH;EACbC,WAAW;EAEXC,WAAW;EACXC,EAAE,GAAG,CAAH;EACFC,EAAE,GAAG,CAAH;EAEFC,EAAE,GAAG,CAAH;EACFC,YAAY;EACZC,cAAc;EACdC,aAAa;EAEbC,SAAS,GAAI,CAAJ,CAnBe,CAmBT;;EACfC,SAAS,GAAI,CAAJ,CApBe,CAoBT;;EACfC,OAAO;EACEC,WAAW;;EAEpBC,WAAW,CAAED,WAAF,EAA4B;IACrC,KAAKA,WAAL,GAAmBA,WAAnB;EACD;;EAEDE,KAAK,CAAEC,KAAF,EAA2B;IAC9B,MAAM;MAAEH;IAAF,IAAkB,IAAxB;IACA,MAAMI,OAAO,GAAGC,UAAU,CAACL,WAAD,CAA1B;;IAEA,IAAI,CAACI,OAAD,IAAY,CAACA,OAAO,CAAC3B,OAAzB,EAAkC;MAChC,OAAO,KAAP;IACD;;IAED,MAAM;MAAE6B,MAAM,EAAEC;IAAV,IAA6BP,WAAW,CAACQ,MAAZ,CAAmBC,QAAtD;IACA,MAAMC,YAAY,GAAGhD,KAAK,CAAC6C,cAAc,CAACI,CAAhB,EAAmBJ,cAAc,CAACK,CAAlC,CAA1B;IACA,MAAMzB,YAAY,GAAG,KAAKA,YAAL,KAAsB,KAAKA,YAAL,GAAoB,IAAI7B,YAAJ,CAAiB0C,WAAjB,CAA1C,CAArB;IAEAb,YAAY,CAAC0B,QAAb,CAAsBb,WAAW,CAACb,YAAlC;IAEA,KAAKI,EAAL,GAAUS,WAAW,CAACc,IAAZ,EAAV;IACA,KAAKjC,WAAL,GAAmBuB,OAAO,CAACvB,WAA3B;IACA,KAAKW,EAAL,GAAUkB,YAAV;IACA,KAAKd,aAAL,GAAqB;MAAEe,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE;IAAX,CAArB;IACA,KAAKtB,WAAL,GAAmBU,WAAW,CAACQ,MAAZ,CAAmBO,GAAnB,CAAuBC,IAA1C;IAEA,KAAK3B,WAAL,GAAmBF,YAAY,CAAC8B,OAAb,CAAqB;MACtCC,UAAU,EAAE,KAAK5B,WADqB;MAEtC6B,MAAM,EAAE,IAF8B;MAGtCC,KAAK,EAAE;IAH+B,CAArB,CAAnB;IAMA,MAAMC,MAAM,GACV,KAAK9B,EAAL,GAAUS,WAAW,CAACQ,MAAZ,CAAmBO,GAAnB,CAAuBO,SAAjC,GAA6C,EAA7C,IACAZ,YAAY,GAAGN,OAAO,CAACzB,QADvB,IAEA+B,YAAY,GAAGN,OAAO,CAACxB,QAHzB;;IAKA,IAAIyC,MAAJ,EAAY;MACV,KAAKE,YAAL;IACD,CAFD,MAEO;MACLpC,YAAY,CAACqC,MAAb,GAAsBrC,YAAY,CAACsC,MAAb,CAAoB,KAAKpC,WAAzB,CAAtB;;MAEA,IAAI,CAACF,YAAY,CAACqC,MAAb,CAAoBE,OAAzB,EAAkC;QAChC,OAAO,KAAP;MACD;;MAED,KAAKC,cAAL;IACD,CAzC6B,CA2C9B;;;IACA3B,WAAW,CAACb,YAAZ,CAAyBqC,MAAzB,CAAgCI,IAAhC,GAAuC,IAAvC,CA5C8B,CA8C9B;;IACA5B,WAAW,CAAC6B,QAAZ,CAAqB,KAAKnC,YAA1B;;IACAM,WAAW,CAAC8B,QAAZ,CAAqB;MACnB9B,WADmB;MAEnBG,KAFmB;MAGnBiB,KAAK,EAAE;IAHY,CAArB;;IAKApB,WAAW,CAAC6B,QAAZ,CAAqB;MAAElB,CAAC,EAAE,CAAC,KAAKjB,YAAL,CAAkBiB,CAAxB;MAA2BC,CAAC,EAAE,CAAC,KAAKlB,YAAL,CAAkBkB;IAAjD,CAArB,EArD8B,CAsD9B;;IACAZ,WAAW,CAACb,YAAZ,CAAyBqC,MAAzB,CAAgCI,IAAhC,GAAuC,IAAvC;IAEA,KAAK5C,MAAL,GAAc,IAAd;IACAgB,WAAW,CAAC+B,UAAZ,GAAyB,IAAzB;IAEA,OAAO,IAAP;EACD;;EAEDR,YAAY,GAAI;IACd,MAAMS,aAAa,GAAG,KAAKhC,WAAL,CAAiBQ,MAAjB,CAAwBC,QAAxB,CAAiCH,MAAvD;IACA,MAAMF,OAAO,GAAGC,UAAU,CAAC,KAAKL,WAAN,CAA1B;IACA,MAAMiC,MAAM,GAAG7B,OAAO,CAAC1B,UAAvB;IACA,MAAMwD,UAAU,GAAG,CAACC,IAAI,CAACC,GAAL,CAAShC,OAAO,CAACxB,QAAR,GAAmB,KAAKY,EAAjC,CAAD,GAAwCyC,MAA3D;IAEA,KAAKvC,YAAL,GAAoB;MAClBiB,CAAC,EAAE,CAACqB,aAAa,CAACrB,CAAd,GAAkBuB,UAAnB,IAAiCD,MADlB;MAElBrB,CAAC,EAAE,CAACoB,aAAa,CAACpB,CAAd,GAAkBsB,UAAnB,IAAiCD;IAFlB,CAApB;IAKA,KAAKxC,EAAL,GAAUyC,UAAV;IACA,KAAKrC,SAAL,GAAiBoC,MAAM,GAAG,KAAKzC,EAA/B;IACA,KAAKM,SAAL,GAAiB,IAAIM,OAAO,CAACxB,QAAR,GAAmB,KAAKY,EAA7C;IAEA,MAAM;MAAEL,YAAF;MAAgBE;IAAhB,IAAgC,IAAtC;IAEAA,WAAW,CAAC6B,UAAZ,GAAyB;MACvBP,CAAC,EAAE,KAAKrB,WAAL,CAAiBqB,CAAjB,GAAqB,KAAKjB,YAAL,CAAkBiB,CADnB;MAEvBC,CAAC,EAAE,KAAKtB,WAAL,CAAiBsB,CAAjB,GAAqB,KAAKlB,YAAL,CAAkBkB;IAFnB,CAAzB;IAKAzB,YAAY,CAACqC,MAAb,GAAsBrC,YAAY,CAACsC,MAAb,CAAoBpC,WAApB,CAAtB;;IAEA,IAAIF,YAAY,CAACqC,MAAb,CAAoBE,OAAxB,EAAiC;MAC/B,KAAKzC,UAAL,GAAkB,IAAlB;MACA,KAAKU,cAAL,GAAsB;QACpBgB,CAAC,EAAE,KAAKjB,YAAL,CAAkBiB,CAAlB,GAAsBxB,YAAY,CAACqC,MAAb,CAAoBa,KAApB,CAA0B1B,CAD/B;QAEpBC,CAAC,EAAE,KAAKlB,YAAL,CAAkBkB,CAAlB,GAAsBzB,YAAY,CAACqC,MAAb,CAAoBa,KAApB,CAA0BzB;MAF/B,CAAtB;IAID;;IAED,KAAK0B,WAAL,CAAiB,MAAM,KAAKC,WAAL,EAAvB;EACD;;EAEDZ,cAAc,GAAI;IAChB,KAAKzC,SAAL,GAAiB,IAAjB;IACA,KAAKD,UAAL,GAAkB,IAAlB;IACA,KAAKS,YAAL,GAAoB;MAClBiB,CAAC,EAAE,KAAKxB,YAAL,CAAkBqC,MAAlB,CAAyBa,KAAzB,CAA+B1B,CADhB;MAElBC,CAAC,EAAE,KAAKzB,YAAL,CAAkBqC,MAAlB,CAAyBa,KAAzB,CAA+BzB;IAFhB,CAApB;IAKA,KAAK0B,WAAL,CAAiB,MAAM,KAAKE,aAAL,EAAvB;EACD;;EAEDF,WAAW,CAAEG,MAAF,EAAsB;IAC/B,KAAK1C,OAAL,GAAelC,GAAG,CAAC6E,OAAJ,CAAY,MAAM;MAC/B,IAAI,KAAK1D,MAAT,EAAiB;QACfyD,MAAM;MACP;IACF,CAJc,CAAf;EAKD;;EAEDF,WAAW,GAAI;IACb,MAAM;MAAEvC;IAAF,IAAkB,IAAxB;IACA,MAAMI,OAAO,GAAGC,UAAU,CAACL,WAAD,CAA1B;IACA,MAAMiC,MAAM,GAAG7B,OAAO,CAAC1B,UAAvB;IACA,MAAMiE,CAAC,GAAG,CAAC3C,WAAW,CAACc,IAAZ,KAAqB,KAAKvB,EAA3B,IAAiC,IAA3C;;IAEA,IAAIoD,CAAC,GAAG,KAAKlD,EAAb,EAAiB;MACf,MAAMmD,QAAQ,GAAG,IAAI,CAACT,IAAI,CAACU,GAAL,CAAS,CAACZ,MAAD,GAAUU,CAAnB,IAAwB,KAAK9C,SAA9B,IAA2C,KAAKC,SAArE;MACA,IAAIgD,SAAJ;;MAEA,IAAI,KAAK7D,UAAT,EAAqB;QACnB6D,SAAS,GAAGC,sBAAsB,CAChC,CADgC,EAEhC,CAFgC,EAGhC,KAAKrD,YAAL,CAAkBiB,CAHc,EAIhC,KAAKjB,YAAL,CAAkBkB,CAJc,EAKhC,KAAKjB,cAAL,CAAoBgB,CALY,EAMhC,KAAKhB,cAAL,CAAoBiB,CANY,EAOhCgC,QAPgC,CAAlC;MASD,CAVD,MAUO;QACLE,SAAS,GAAG;UACVnC,CAAC,EAAE,KAAKjB,YAAL,CAAkBiB,CAAlB,GAAsBiC,QADf;UAEVhC,CAAC,EAAE,KAAKlB,YAAL,CAAkBkB,CAAlB,GAAsBgC;QAFf,CAAZ;MAID;;MAED,MAAMP,KAAK,GAAG;QAAE1B,CAAC,EAAEmC,SAAS,CAACnC,CAAV,GAAc,KAAKf,aAAL,CAAmBe,CAAtC;QAAyCC,CAAC,EAAEkC,SAAS,CAAClC,CAAV,GAAc,KAAKhB,aAAL,CAAmBgB;MAA7E,CAAd;MAEA,KAAKhB,aAAL,CAAmBe,CAAnB,IAAwB0B,KAAK,CAAC1B,CAA9B;MACA,KAAKf,aAAL,CAAmBgB,CAAnB,IAAwByB,KAAK,CAACzB,CAA9B;MAEAZ,WAAW,CAAC6B,QAAZ,CAAqBQ,KAArB;MACArC,WAAW,CAACgD,IAAZ;MAEA,KAAKV,WAAL,CAAiB,MAAM,KAAKC,WAAL,EAAvB;IACD,CA9BD,MA8BO;MACLvC,WAAW,CAAC6B,QAAZ,CAAqB;QACnBlB,CAAC,EAAE,KAAKhB,cAAL,CAAoBgB,CAApB,GAAwB,KAAKf,aAAL,CAAmBe,CAD3B;QAEnBC,CAAC,EAAE,KAAKjB,cAAL,CAAoBiB,CAApB,GAAwB,KAAKhB,aAAL,CAAmBgB;MAF3B,CAArB;MAKA,KAAKqC,GAAL;IACD;EACF;;EAEDT,aAAa,GAAI;IACf,MAAM;MAAExC;IAAF,IAAkB,IAAxB;IACA,MAAM2C,CAAC,GAAG3C,WAAW,CAACc,IAAZ,KAAqB,KAAKvB,EAApC;IACA,MAAM;MAAET,iBAAiB,EAAEoE;IAArB,IAAkC7C,UAAU,CAACL,WAAD,CAAlD;;IAEA,IAAI2C,CAAC,GAAGO,QAAR,EAAkB;MAChB,MAAMJ,SAAS,GAAG;QAChBnC,CAAC,EAAEwC,WAAW,CAACR,CAAD,EAAI,CAAJ,EAAO,KAAKjD,YAAL,CAAkBiB,CAAzB,EAA4BuC,QAA5B,CADE;QAEhBtC,CAAC,EAAEuC,WAAW,CAACR,CAAD,EAAI,CAAJ,EAAO,KAAKjD,YAAL,CAAkBkB,CAAzB,EAA4BsC,QAA5B;MAFE,CAAlB;MAIA,MAAMb,KAAK,GAAG;QACZ1B,CAAC,EAAEmC,SAAS,CAACnC,CAAV,GAAc,KAAKf,aAAL,CAAmBe,CADxB;QAEZC,CAAC,EAAEkC,SAAS,CAAClC,CAAV,GAAc,KAAKhB,aAAL,CAAmBgB;MAFxB,CAAd;MAKA,KAAKhB,aAAL,CAAmBe,CAAnB,IAAwB0B,KAAK,CAAC1B,CAA9B;MACA,KAAKf,aAAL,CAAmBgB,CAAnB,IAAwByB,KAAK,CAACzB,CAA9B;MAEAZ,WAAW,CAAC6B,QAAZ,CAAqBQ,KAArB;MACArC,WAAW,CAACgD,IAAZ,CAAiB;QAAEI,aAAa,EAAE,KAAKhE;MAAtB,CAAjB;MAEA,KAAKkD,WAAL,CAAiB,MAAM,KAAKE,aAAL,EAAvB;IACD,CAjBD,MAiBO;MACLxC,WAAW,CAAC6B,QAAZ,CAAqB;QACnBlB,CAAC,EAAE,KAAKjB,YAAL,CAAkBiB,CAAlB,GAAsB,KAAKf,aAAL,CAAmBe,CADzB;QAEnBC,CAAC,EAAE,KAAKlB,YAAL,CAAkBkB,CAAlB,GAAsB,KAAKhB,aAAL,CAAmBgB;MAFzB,CAArB;MAKA,KAAKqC,GAAL;IACD;EACF;;EAED3E,MAAM,CAAE;IAAE+E,OAAF;IAAWlD,KAAX;IAAkBmD;EAAlB,CAAF,EAAoE;IACxE,MAAM;MAAEtD;IAAF,IAAkB,IAAxB,CADwE,CAGxE;;IACAA,WAAW,CAAC6B,QAAZ,CAAqB;MACnBlB,CAAC,EAAE,CAAC,KAAKf,aAAL,CAAmBe,CADJ;MAEnBC,CAAC,EAAE,CAAC,KAAKhB,aAAL,CAAmBgB;IAFJ,CAArB,EAJwE,CASxE;;IACAZ,WAAW,CAACuD,aAAZ,CAA0BF,OAA1B,EAAmClD,KAAnC,EAA0CmD,WAA1C,EAAuD,IAAvD,EAVwE,CAYxE;;IACAtD,WAAW,CAAC8B,QAAZ,CAAqB;MACnB9B,WADmB;MAEnBG,KAFmB;MAGnBiB,KAAK,EAAE;IAHY,CAArB;;IAKAxD,UAAU,CAACoC,WAAW,CAACQ,MAAZ,CAAmBgD,IAApB,EAA0BxD,WAAW,CAACQ,MAAZ,CAAmBO,GAA7C,CAAV;IAEA,KAAK0C,IAAL;EACD;;EAEDR,GAAG,GAAI;IACL,KAAKjD,WAAL,CAAiBgD,IAAjB;IACA,KAAKhD,WAAL,CAAiBiD,GAAjB;IACA,KAAKQ,IAAL;EACD;;EAEDA,IAAI,GAAI;IACN,KAAKzE,MAAL,GAAc,KAAKE,SAAL,GAAiB,KAA/B;IACA,KAAKc,WAAL,CAAiB+B,UAAjB,GAA8B,IAA9B;IACAlE,GAAG,CAAC6F,MAAJ,CAAW,KAAK3D,OAAhB;EACD;;AAhQuB;;AAmQ1B,SAASG,KAAT,CAAgB;EAAEF,WAAF;EAAeG;AAAf,CAAhB,EAAuE;EACrE,IAAI,CAACH,WAAW,CAAC2D,YAAb,IAA6B3D,WAAW,CAAC+B,UAA7C,EAAyD;IACvD,OAAO,IAAP;EACD;;EAED,MAAM6B,OAAO,GAAG5D,WAAW,CAACxB,OAAZ,CAAoB0B,KAApB,CAA0BC,KAA1B,CAAhB,CALqE,CAOrE;;EACA,OAAOyD,OAAO,GAAG,KAAH,GAAW,IAAzB;AACD,C,CAED;AACA;;;AACA,SAAStF,MAAT,CAAiBuF,GAAjB,EAAuD;EACrD,MAAM;IAAE7D,WAAF;IAAesD;EAAf,IAA+BO,GAArC;EACA,MAAMC,KAAK,GAAG9D,WAAW,CAACxB,OAA1B;EAEA,IAAI,CAACsF,KAAK,CAAC9E,MAAX,EAAmB;EAEnB,IAAI+E,OAAO,GAAGT,WAAd,CANqD,CAQrD;;EACA,OAAO3F,EAAE,CAACoG,OAAH,CAAWA,OAAX,CAAP,EAA4B;IAC1B;IACA,IAAIA,OAAO,KAAK/D,WAAW,CAAC+D,OAA5B,EAAqC;MACnCD,KAAK,CAACxF,MAAN,CAAauF,GAAb;MACA;IACD;;IAEDE,OAAO,GAAGtG,GAAG,CAACuG,UAAJ,CAAeD,OAAf,CAAV;EACD;AACF;;AAED,SAASN,IAAT,CAAe;EAAEzD;AAAF,CAAf,EAA8D;EAC5D,MAAM8D,KAAK,GAAG9D,WAAW,CAACxB,OAA1B;;EAEA,IAAIsF,KAAK,CAAC9E,MAAV,EAAkB;IAChB8E,KAAK,CAACL,IAAN;EACD;AACF;;AAED,SAASpD,UAAT,CAAqB;EAAE4D,YAAF;EAAgBC;AAAhB,CAArB,EAA8D;EAC5D,OAAOD,YAAY,IAAIA,YAAY,CAAC7D,OAA7B,IAAwC8D,QAAQ,CAACC,IAAjD,IAAyDF,YAAY,CAAC7D,OAAb,CAAqB8D,QAAQ,CAACC,IAA9B,EAAoC3F,OAApG;AACD;;AAED,MAAMA,OAAe,GAAG;EACtB4F,EAAE,EAAE,SADkB;EAEtBC,MAAM,EAAE,CAAC,WAAD,EAAc,SAAd,CAFc;EAGtBvG,OAHsB;EAItBwG,SAAS,EAAE;IACT,oBAAoB,CAAC;MAAEtE;IAAF,CAAD,KAAqB;MACvCA,WAAW,CAACxB,OAAZ,GAAsB,IAAIO,YAAJ,CAAiBiB,WAAjB,CAAtB;IACD,CAHQ;IAKT,kCAAkCE,KALzB;IAMT,qBAAqB5B,MANZ;IAOT,qBAAqBmF,IAPZ;IAST,qCAAsCI,GAAD,IAAS;MAC5C,MAAM;QAAE1E;MAAF,IAAmB0E,GAAG,CAAC7D,WAA7B;MAEAb,YAAY,CAACsE,IAAb,CAAkBI,GAAlB;MACA1E,YAAY,CAACe,KAAb,CAAmB2D,GAAnB,EAAwBA,GAAG,CAAC7D,WAAJ,CAAgBQ,MAAhB,CAAuBO,GAAvB,CAA2BC,IAAnD;MACA7B,YAAY,CAACoF,kBAAb,CAAgCV,GAAhC;IACD,CAfQ;IAiBT,2CAA4CA,GAAD,IAASA,GAAG,CAAC7D,WAAJ,CAAgBb,YAAhB,CAA6BqF,WAA7B,CAAyCX,GAAzC,CAjB3C;IAkBT,8BAA8BtG,SAAS,CAACkH,iBAlB/B;IAmBT,oCAAoClH,SAAS,CAACkH,iBAnBrC;IAoBT,0CAA2CZ,GAAD,IACxCA,GAAG,CAAC7D,WAAJ,CAAgBb,YAAhB,CAA6BuF,wBAA7B,CAAsDb,GAAtD,CArBO;IAsBT,oCAAqCA,GAAD,IAASA,GAAG,CAAC7D,WAAJ,CAAgBb,YAAhB,CAA6BuF,wBAA7B,CAAsDb,GAAtD;EAtBpC;AAJW,CAAxB,C,CA8BA;;AACA,SAASc,gBAAT,CAA2BhC,CAA3B,EAAsCiC,EAAtC,EAAkDC,EAAlD,EAA8DC,EAA9D,EAA0E;EACxE,MAAMC,EAAE,GAAG,IAAIpC,CAAf;EACA,OAAOoC,EAAE,GAAGA,EAAL,GAAUH,EAAV,GAAe,IAAIG,EAAJ,GAASpC,CAAT,GAAakC,EAA5B,GAAiClC,CAAC,GAAGA,CAAJ,GAAQmC,EAAhD;AACD;;AAED,SAAS/B,sBAAT,CACEiC,MADF,EAEEC,MAFF,EAGEC,GAHF,EAIEC,GAJF,EAKEC,IALF,EAMEC,IANF,EAOEC,QAPF,EAQE;EACA,OAAO;IACL3E,CAAC,EAAEgE,gBAAgB,CAACW,QAAD,EAAWN,MAAX,EAAmBE,GAAnB,EAAwBE,IAAxB,CADd;IAELxE,CAAC,EAAE+D,gBAAgB,CAACW,QAAD,EAAWL,MAAX,EAAmBE,GAAnB,EAAwBE,IAAxB;EAFd,CAAP;AAID,C,CAED;;;AACA,SAASlC,WAAT,CAAsBR,CAAtB,EAAiC4C,CAAjC,EAA4CC,CAA5C,EAAuDC,CAAvD,EAAkE;EAChE9C,CAAC,IAAI8C,CAAL;EACA,OAAO,CAACD,CAAD,GAAK7C,CAAL,IAAUA,CAAC,GAAG,CAAd,IAAmB4C,CAA1B;AACD;;AAED,eAAe/G,OAAf"
}