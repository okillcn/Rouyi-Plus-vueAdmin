{
	"version": 3,
	"names": [
		"extend",
		"addEdges",
		"Modification",
		"makeModifier",
		"aspectRatio",
		"start",
		"arg",
		"state",
		"rect",
		"edges",
		"originalEdges",
		"pageCoords",
		"coords",
		"ratio",
		"options",
		"equalDelta",
		"modifiers",
		"width",
		"height",
		"startCoords",
		"startRect",
		"linkedEdges",
		"top",
		"left",
		"bottom",
		"right",
		"xIsPrimaryAxis",
		"sign",
		"edgeSign",
		"x",
		"y",
		"length",
		"subModification",
		"interaction",
		"copyFrom",
		"modification",
		"prepareStates",
		"startAll",
		"set",
		"initialCoords",
		"aspectMethod",
		"setEqualDelta",
		"setRatio",
		"correctedRect",
		"result",
		"setAll",
		"prevCoords",
		"prevRect",
		"delta",
		"changed",
		"xIsCriticalAxis",
		"Math",
		"abs",
		"eventProps",
		"defaults",
		"enabled",
		"newHeight",
		"newWidth"
	],
	"sources": [
		"aspectRatio.ts"
	],
	"sourcesContent": [
		"/**\n * @module modifiers/aspectRatio\n *\n * @description\n * This module forces elements to be resized with a specified dx/dy ratio.\n *\n * ```js\n * interact(target).resizable({\n *   modifiers: [\n *     interact.modifiers.snapSize({\n *       targets: [ interact.snappers.grid({ x: 20, y: 20 }) ],\n *     }),\n *     interact.aspectRatio({ ratio: 'preserve' }),\n *   ],\n * });\n * ```\n */\n\nimport type { Point, Rect, EdgeOptions } from '@interactjs/core/types'\nimport extend from '@interactjs/utils/extend'\nimport { addEdges } from '@interactjs/utils/rect'\n\nimport Modification from './Modification'\nimport { makeModifier } from './base'\nimport type { Modifier, ModifierModule, ModifierState } from './types'\n\nexport interface AspectRatioOptions {\n  ratio?: number | 'preserve'\n  equalDelta?: boolean\n  modifiers?: Modifier[]\n  enabled?: boolean\n}\n\nexport type AspectRatioState = ModifierState<\nAspectRatioOptions,\n{\n  startCoords: Point\n  startRect: Rect\n  linkedEdges: EdgeOptions\n  ratio: number\n  equalDelta: boolean\n  xIsPrimaryAxis: boolean\n  edgeSign: {\n    x: number\n    y: number\n  }\n  subModification: Modification\n}\n>\n\nconst aspectRatio: ModifierModule<AspectRatioOptions, AspectRatioState> = {\n  start (arg) {\n    const { state, rect, edges: originalEdges, pageCoords: coords } = arg\n    let { ratio } = state.options\n    const { equalDelta, modifiers } = state.options\n\n    if (ratio === 'preserve') {\n      ratio = rect.width / rect.height\n    }\n\n    state.startCoords = extend({}, coords)\n    state.startRect = extend({}, rect)\n    state.ratio = ratio\n    state.equalDelta = equalDelta\n\n    const linkedEdges = (state.linkedEdges = {\n      top: originalEdges.top || (originalEdges.left && !originalEdges.bottom),\n      left: originalEdges.left || (originalEdges.top && !originalEdges.right),\n      bottom: originalEdges.bottom || (originalEdges.right && !originalEdges.top),\n      right: originalEdges.right || (originalEdges.bottom && !originalEdges.left),\n    })\n\n    state.xIsPrimaryAxis = !!(originalEdges.left || originalEdges.right)\n\n    if (state.equalDelta) {\n      const sign = (linkedEdges.left ? 1 : -1) * (linkedEdges.top ? 1 : -1)\n      state.edgeSign = {\n        x: sign,\n        y: sign,\n      }\n    } else {\n      state.edgeSign = {\n        x: linkedEdges.left ? -1 : 1,\n        y: linkedEdges.top ? -1 : 1,\n      }\n    }\n\n    extend(arg.edges, linkedEdges)\n\n    if (!modifiers || !modifiers.length) return\n\n    const subModification = new Modification(arg.interaction)\n\n    subModification.copyFrom(arg.interaction.modification)\n    subModification.prepareStates(modifiers)\n\n    state.subModification = subModification\n    subModification.startAll({ ...arg })\n  },\n\n  set (arg) {\n    const { state, rect, coords } = arg\n    const initialCoords = extend({}, coords)\n    const aspectMethod = state.equalDelta ? setEqualDelta : setRatio\n\n    aspectMethod(state, state.xIsPrimaryAxis, coords, rect)\n\n    if (!state.subModification) {\n      return null\n    }\n\n    const correctedRect = extend({}, rect)\n\n    addEdges(state.linkedEdges, correctedRect, {\n      x: coords.x - initialCoords.x,\n      y: coords.y - initialCoords.y,\n    })\n\n    const result = state.subModification.setAll({\n      ...arg,\n      rect: correctedRect,\n      edges: state.linkedEdges,\n      pageCoords: coords,\n      prevCoords: coords,\n      prevRect: correctedRect,\n    })\n\n    const { delta } = result\n\n    if (result.changed) {\n      const xIsCriticalAxis = Math.abs(delta.x) > Math.abs(delta.y)\n\n      // do aspect modification again with critical edge axis as primary\n      aspectMethod(state, xIsCriticalAxis, result.coords, result.rect)\n      extend(coords, result.coords)\n    }\n\n    return result.eventProps\n  },\n\n  defaults: {\n    ratio: 'preserve',\n    equalDelta: false,\n    modifiers: [],\n    enabled: false,\n  },\n}\n\nfunction setEqualDelta ({ startCoords, edgeSign }: AspectRatioState, xIsPrimaryAxis: boolean, coords: Point) {\n  if (xIsPrimaryAxis) {\n    coords.y = startCoords.y + (coords.x - startCoords.x) * edgeSign.y\n  } else {\n    coords.x = startCoords.x + (coords.y - startCoords.y) * edgeSign.x\n  }\n}\n\nfunction setRatio (\n  { startRect, startCoords, ratio, edgeSign }: AspectRatioState,\n  xIsPrimaryAxis: boolean,\n  coords: Point,\n  rect: Rect,\n) {\n  if (xIsPrimaryAxis) {\n    const newHeight = rect.width / ratio\n\n    coords.y = startCoords.y + (newHeight - startRect.height) * edgeSign.y\n  } else {\n    const newWidth = rect.height * ratio\n\n    coords.x = startCoords.x + (newWidth - startRect.width) * edgeSign.x\n  }\n}\n\nexport default makeModifier(aspectRatio, 'aspectRatio')\nexport { aspectRatio }\n"
	],
	"mappings": "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"
}